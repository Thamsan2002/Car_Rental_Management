@model List<Car_Rental_Management.Dtos.CarDto>

@{
    ViewData["Title"] = "Home";
}

<!-- Hero Slider Section -->
<section id="home" class="hero">
    <div class="slider">
        <!-- Slide 1 -->
        <div class="slide active">
            <img src="~/images/car3.jpg" alt="Car 1" />
            <div class="slide-text">
                <h1>Drive Your Dream Car</h1>
                <p>Premium Cars at Affordable Prices</p>
                <a asp-action="Booking" asp-controller="Booking" class="btn">Book Now</a>
            </div>
        </div>

        <!-- Slide 2 -->
        <div class="slide">
            <img src="~/images/car2.jpg" alt="Car 2" />
            <div class="slide-text">
                <h1>Luxury & Comfort</h1>
                <p>Experience the best ride</p>
                <a asp-action="Index" asp-controller="Car" class="btn">View Cars</a>
            </div>
        </div>

        <!-- Slide 3 -->
        <div class="slide">
            <img src="~/images/car.jpg" alt="Car 3" />
            <div class="slide-text">
                <h1>Easy Booking</h1>
                <p>Book online in seconds</p>
                <a asp-action="Register" asp-controller="Customer" class="btn">Get Started</a>
            </div>
        </div>
    </div>
</section>

<!-- Clients Section -->
<section id="clients" class="clients">
    <img src="~/images/logo01.jpg" alt="Brand 1" />
    <img src="~/images/logo02.jpg" alt="Brand 2" />
    <img src="~/images/logo03.jpg" alt="Brand 3" />
    <img src="~/images/logo02.jpg" alt="Brand 2" />
    <img src="~/images/logo01.jpg" alt="Brand 3" />
    <img src="~/images/logo03.jpg" alt="Brand 3" />
</section>

<!-- Features Section -->
<section id="features" class="py-5" style="background:#f8f8f8;">
    <div class="container">
        <h2 class="text-center mb-5" data-aos="fade-down">Why Choose KTS?</h2>
        <div class="row g-4">
            <div class="col-md-4" data-aos="zoom-in">
                <div class="feature-box">
                    <i class="fas fa-car"></i>
                    <h4>Wide Selection</h4>
                    <p>From economy to luxury, we offer a wide range of cars to suit your needs.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="zoom-in" data-aos-delay="200">
                <div class="feature-box">
                    <i class="fas fa-tags"></i>
                    <h4>Affordable Pricing</h4>
                    <p>Transparent pricing with no hidden fees. Rent with confidence.</p>
                </div>
            </div>
            <div class="col-md-4" data-aos="zoom-in" data-aos-delay="400">
                <div class="feature-box">
                    <i class="fas fa-headset"></i>
                    <h4>24/7 Support</h4>
                    <p>Our support team is here to help you anytime, anywhere.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- About Section -->
@await Html.PartialAsync("_About", model: null)

<section id="cars" class="car-list">
    <div class="container">
        <h2>Available Cars</h2>
        <div class="row">
            @foreach (var car in Model)
            {
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <!-- Show first image -->
                        <img src="~/images/@(car.ImageUrls?.FirstOrDefault() ?? "noimage.jpg")" alt="@car.Model" class="card-img-top" />

                        <div class="card-body">
                            <h5 class="card-title">@car.Make @car.Model (@car.Year)</h5>
                            <p><strong>Price:</strong> @car.Price?.ToString("C")</p>

                            <!-- Book Now -->
                            <a asp-controller="Booking" asp-action="Booking" asp-route-id="@car.Id" class="btn btn-primary">Book Now</a>

                            <!-- Details (Modal trigger) -->
                            <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#carModal_@car.Id">
                                Details
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Car Details Modal -->
                <div class="modal fade" id="carModal_@car.Id" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">@car.Make @car.Model Details</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">

                                <!-- Image Slider -->
                                <div id="carousel_@car.Id" class="carousel slide" data-bs-ride="carousel">
                                    <div class="carousel-inner">
                                        @{
                                            int index = 0;
                                            foreach (var img in car.ImageUrls ?? new List<string>())
                                            {
                                                <div class="carousel-item @(index == 0 ? "active" : "")">
                                                    <img src="~/images/@img" class="d-block w-100" alt="Car image" />
                                                </div>
                                                index++;
                                            }
                                        }
                                    </div>
                                    <button class="carousel-control-prev" type="button" data-bs-target="#carousel_@car.Id" data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon"></span>
                                    </button>
                                    <button class="carousel-control-next" type="button" data-bs-target="#carousel_@car.Id" data-bs-slide="next">
                                        <span class="carousel-control-next-icon"></span>
                                    </button>
                                </div>

                                <!-- Car Details -->
                                <div class="mt-3">
                                    <p><strong>Make:</strong> @car.Make</p>
                                    <p><strong>Model:</strong> @car.Model</p>
                                    <p><strong>Year:</strong> @car.Year</p>
                                    <p><strong>Seats:</strong> @car.Seats</p>
                                    <p><strong>Transmission:</strong> @car.Transmission</p>
                                    <p><strong>Fuel:</strong> @car.Fuel</p>
                                    <p><strong>Mileage:</strong> @car.Mileage</p>
                                    <p><strong>Price:</strong> @car.Price?.ToString("C")</p>
                                    <p><strong>Color:</strong> @car.Color</p>
                                    <p><strong>Description:</strong> @car.Description</p>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <a asp-controller="Booking" asp-action="Booking" asp-route-id="@car.Id" class="btn btn-success">Book Now</a>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>


@await Html.PartialAsync("_Contact", model: null)


@section Scripts {
    <!-- AOS Animation Script -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            AOS.init({
                duration: 1000,
                once: false  // <-- Animation triggers every time you scroll
            });

            // Hero Slider Logic
            const slides = document.querySelectorAll(".slide");
            let current = 0;

            function nextSlide() {
                slides[current].classList.remove("active");
                current = (current + 1) % slides.length;
                slides[current].classList.add("active");
            }

            setInterval(nextSlide, 5000);
        });
    </script>
}